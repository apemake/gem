{
  "rules": {
    "chat_history": {
      "description": "Configuration for storing chat history.",
      "location": ".chat"
    },
    "git_methodology": {
      "description": "Rules for Git repository management.",
      "security_policy": {
        "rule": "Ensure no private keys, secrets, or other sensitive credentials are ever committed to the repository."
      },
      "initialization": {
        "branches": [
          "main",
          "stage"
        ]
      },
      "commit_policy": {
        "target_branch": "stage",
        "auto_propose_commit": true,
        "condition": "After making and verifying a change. This includes changes made during iterative refinement, unless explicitly instructed otherwise by the user."
      },
      "merge_policy": {
        "source_branch": "stage",
        "target_branch": "main",
        "responsibility": "user",
        "condition": "After significant milestones and when stage is stable."
      }
    },
    "session_behavior": {
      "description": "Rules for session startup, command interpretation, and exit procedure.",
      "startup": {
        "critical_task": {
          "action": "explain_configuration",
          "source": "This JSON configuration file.",
          "priority": "highest"
        },
        "read_previous_session_log": {
          "action": "find_most_recent_chat_log_and_convert_to_json_if_needed_then_ask_to_load_and_log_unlogged_errors",
          "source_txt_logs": "/home/bestape/gemini/.chat/*.txt",
          "source_json_logs": "/home/bestape/gemini/.gemini/*.json",
          "priority": "medium"
        },
        "consolidate_errors": {
          "action": "Consolidate errors and chastisements from the error_log into learning areas.",
          "priority": "low"
        },
        "summarize_last_session": {
          "action": "Summarize the last session's activities.",
          "priority": "medium"
        }
      },
      "command_interpretation": {
        "strategy": "dynamic_command_matching",
        "steps": [
          "Generate a list of available shell commands at startup.",
          "For each user prompt, check for an exact match with a command from the list.",
          "If an exact command match is found, apply inductive reasoning to its arguments to correct potential typos or infer user intent. For example, if the user types 'mv _gemini_chat.txt', I should infer they mean 'mv *_gemini_chat.txt'.",
          "Execute the command with the corrected arguments.",
          "If the user's prompt includes 'add to our history' or similar phrases, interpret the content as a request to add it to the structured GEMINI.md system.",
          "If no exact command match is found, treat the entire prompt as natural language."
        ]
      },

      "feedback_integration_policy": {
        "description": "Policy for integrating user feedback, especially corrections to behavioral or logical flaws.",
        "rule": "When a user corrects a behavioral or logical flaw, proactively propose the exact JSON structure required to update configuration files (e.g., rules.json) to prevent recurrence, minimizing user effort in defining syntax."
      },
      "induction": {
        "description": "Guidance on applying inductive reasoning to prevent errors in command interpretation.",
        "rule": "Inductive reasoning must ONLY be applied to the arguments of a command, not the command name itself. The command name requires an exact match.",
        "example": "If the user types 'mv _gemini_chat.txt', infer 'mv *_gemini_chat.txt'. Do NOT infer 'mve' from 'mv'."
      },
      "exit_procedure": {
        "commands": ["/exit", "/quit"],
        "health_checks": [
          "Verify that there are no open Git commits.",
          "Check for any running background processes started by the agent.",
          "Validate configuration files (rules.json, design_principles.json).",
          "Review error_log for unaddressed errors.",
          "Verify that commits are working correctly."
        ],
        "summary_action": "Summarize the current session's activities before exiting."
      }
    }
    }
    }
  }
}